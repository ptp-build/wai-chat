"use strict";(self.webpackChunkwai=self.webpackChunkwai||[]).push([[9415],{70172:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(60748),r=n(33555),s=n(6137),c=n(83716),l=n(77361),i=n(56112),a=n(2155),d=n(46752),u=n(32340),m=n(6202),f=n(31212),v=n(59107),p=n(3657),h=n(35148);const Z=(0,d.y)("Avatar");Z.media=Z("media"),Z.icon=Z("icon");const g=(0,o.X$)((({className:e,size:t="large",chat:n,user:g,photo:P,userStatus:I,text:b,isSavedMessages:E,withVideo:y,noLoop:C,loopIndefinitely:w,lastSyncTime:A,showVideoOverwrite:N,animationLevel:k,noPersonalPhoto:B,observeIntersection:T,onClick:S})=>{const{loadFullUser:L}=(0,r.Sv)(),O=(0,o.sO)(null),R=(0,o.sO)(0),U=(0,p.Op)(O,T),x=g&&(0,i.NB)(g),D=g&&(0,i.pK)(g.id),q=n?.isForum;let F,V;const H=!l.as&&k===c.zy8&&g?.isPremium&&g?.hasVideoAvatar,$=N&&P?.isVideo,j=U&&y&&($||H),z=g?.fullInfo?.personalPhoto||g?.fullInfo?.profilePhoto||g?.fullInfo?.fallbackPhoto,M=z?.isVideo,X=j&&(M||$),J="jumbo"===t;E||x||(g&&!B?F=(0,i.RT)(g,J?"big":void 0):n?F=(0,i.RT)(n,J?"big":void 0):P&&(F=`photo${P.id}?size=m`,P.isVideo&&y&&(V=`videoAvatar${P.id}?size=u`)),M&&(V=(0,i.RT)(g,void 0,"video")));const K=(0,m.Z)(F,!1,s.IU.BlobUrl,A),_=(0,m.Z)(V,!X,s.IU.BlobUrl,A),Y=Boolean(K||_),W=Boolean(U&&_&&X),{transitionClassNames:G}=(0,f.Z)(Y,void 0,Y,"slow"),Q=(0,o.I4)((e=>{const t=e.currentTarget;_&&(w||(R.current+=1,(R.current>=3||C)&&(t.style.display="none")))}),[w,C,_]),ee=g?.id;(0,o.d4)((()=>{ee&&j&&!z&&L({userId:ee})}),[L,z,ee,j]);const te=(0,v.Z)();let ne;const oe=g?(0,i.Js)(g):n?(0,i.U)(te,n):b;if(E)ne=o.ZP.createElement("i",{className:(0,d.Z)(Z.icon,"icon-avatar-saved-messages"),role:"img","aria-label":oe});else if(x)ne=o.ZP.createElement("i",{className:(0,d.Z)(Z.icon,"icon-avatar-deleted-account"),role:"img","aria-label":oe});else if(D)ne=o.ZP.createElement("i",{className:(0,d.Z)(Z.icon,"icon-reply-filled"),role:"img","aria-label":oe});else if(Y)ne=o.ZP.createElement(o.ZP.Fragment,null,o.ZP.createElement("img",{src:K,className:(0,d.Z)(Z.media,"avatar-media",G,_&&"poster"),alt:oe,decoding:"async"}),W&&o.ZP.createElement(h.Z,{canPlay:!0,src:_,className:(0,d.Z)(Z.media,"avatar-media","poster"),muted:!0,loop:w,autoPlay:!0,disablePictureInPicture:!0,playsInline:!0,onEnded:Q}));else if(g){const e=(0,i.Js)(g);ne=e?(0,a.Xv)(e,2):void 0}else if(n){const e=(0,i.U)(te,n);ne=e&&(0,a.Xv)(e,(0,i.YC)(n.id)?2:1)}else b&&(ne=(0,a.Xv)(b,2));const re=!E&&g&&I&&(0,i.kM)(g,I),se=(0,d.Z)(`Avatar size-${t}`,e,`color-bg-${(0,i.Rs)(g||n)}`,E&&"saved-messages",x&&"deleted-account",D&&"replies-bot-account",q&&"forum",re&&"online",S&&"interactive",!E&&!K&&"no-photo"),ce=Boolean(E||K),le=(0,o.I4)((e=>{"1"!==ee&&ee!==(0,r.Rd)().currentUserId&&S&&S(e,ce)}),[S,ce]),ie=(g||n)&&(g||n).id;return o.ZP.createElement("div",{ref:O,className:se,onClick:le,"data-test-sender-id":c.Cgt?ie:void 0,"aria-label":"string"==typeof ne?oe:void 0},"string"==typeof ne?(0,u.Z)(ne,["jumbo"===t?"hq_emoji":"emoji"]):ne)}))},22275:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(60748),r=n(33555),s=n(11192),c=n(56112),l=n(32340),i=n(59107),a=n(17551);const d=(0,o.X$)((0,r.c$)(((e,{userId:t})=>{const n=(0,s.jr)(e),o=t&&(0,s.dy)(e,t);return{chat:n,contactName:o?(0,c.Vl)(o):void 0}}))((({isOpen:e,chat:t,userId:n,contactName:s,onClose:c})=>{const{deleteChatMember:d}=(0,r.Sv)(),u=(0,i.Z)(),m=(0,o.I4)((()=>{d({chatId:t.id,userId:n}),c()}),[t,d,c,n]);if(t&&n)return o.ZP.createElement(a.Z,{isOpen:e,onClose:c,title:u("GroupRemoved.Remove"),textParts:(0,l.Z)(u("PeerInfo.Confirm.RemovePeer",s)),confirmLabel:u("lng_box_remove"),confirmHandler:m,confirmIsDestructive:!0})})))},17551:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(60748),r=n(59107),s=n(72313),c=n(13103),l=n(231);const i=(0,o.X$)((({isOpen:e,onClose:t,onCloseAnimationEnd:n,title:i,header:a,text:d,textParts:u,confirmLabel:m="Confirm",confirmHandler:f,confirmIsDestructive:v,areButtonsInColumn:p,children:h})=>{const Z=(0,r.Z)(),g=(0,o.sO)(null),P=(0,o.I4)((e=>{-1===e&&f()}),[f]),I=(0,s.Z)(g,e,P,".Button");return o.ZP.createElement(c.Z,{className:"confirm",title:i||Z("Wai"),header:a,isOpen:e,onClose:t,onCloseAnimationEnd:n},d&&d.split("\\n").map((e=>o.ZP.createElement("p",null,e))),u||h,o.ZP.createElement("div",{className:p?"dialog-buttons-column":"dialog-buttons mt-2",ref:g,onKeyDown:I},o.ZP.createElement(l.Z,{className:"confirm-dialog-button",isText:!0,onClick:f,color:v?"danger":"primary"},m),o.ZP.createElement(l.Z,{className:"confirm-dialog-button",isText:!0,onClick:t},Z("Cancel"))))}))},21273:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(91713),r=n(60748),s=n(69118),c=n(87675),l=n(77361),i=n(80036);const a=({ref:e,className:t,items:n,itemSelector:a=".ListItem",preloadBackwards:d=20,sensitiveArea:u=800,withAbsolutePositioning:m,maxHeight:f,noScrollRestore:v=!1,noScrollRestoreOnTop:p=!1,noFastList:h,cacheBuster:Z,beforeChildren:g,children:P,onLoadMore:I,onScroll:b,onKeyDown:E,onDragOver:y,onDragLeave:C})=>{let w=(0,r.sO)(null);e&&(w=e);const A=(0,r.sO)({}),[N,k]=(0,r.Ye)((()=>I?[(0,s.Ds)(((e=!1)=>{I({direction:o.Uq.Backwards,noScroll:e})}),1e3,!0,!1),(0,s.Ds)((()=>{I({direction:o.Uq.Forwards})}),1e3,!0,!1)]:[]),[I,n]);(0,r.d4)((()=>{if(!N)return;if(d>0&&(!n||n.length<d))return void N(!0);const{scrollHeight:e,clientHeight:t}=w.current;t&&e<=t&&N()}),[n,N,d]),(0,r.bt)((()=>{const e=w.current,t=A.current;let n;if(t.listItemElements=e.querySelectorAll(a),t.currentAnchor&&Array.from(t.listItemElements).includes(t.currentAnchor)){const{scrollTop:o}=e;n=o+(t.currentAnchor.getBoundingClientRect().top-t.currentAnchorTop)}else{const e=t.listItemElements[0];e&&(t.currentAnchor=e,t.currentAnchorTop=e.getBoundingClientRect().top)}m||v||p&&0===e.scrollTop||((0,c.Z)(e,n),t.isScrollTopJustUpdated=!0)}),[n,a,v,p,Z,m]);const B=(0,r.I4)((e=>{if(k&&N){const{isScrollTopJustUpdated:e,currentAnchor:t,currentAnchorTop:n}=A.current,o=A.current.listItemElements;if(e)return void(A.current.isScrollTopJustUpdated=!1);const r=o.length,s=w.current,{scrollTop:c,scrollHeight:l,offsetHeight:i}=s,a=c<=(r?o[0].offsetTop:0)+u,d=(r?o[r-1].offsetTop+o[r-1].offsetHeight:l)-(c+i)<=u;let m=!1;if(a){const e=o[0];if(e){const o=e.getBoundingClientRect().top,r=t?.offsetParent&&t!==e?t.getBoundingClientRect().top:o;t&&void 0!==n&&r>n&&(A.current.currentAnchor=e,A.current.currentAnchorTop=o,m=!0,k())}}if(d){const e=o[r-1];if(e){const o=e.getBoundingClientRect().top,r=t?.offsetParent&&t!==e?t.getBoundingClientRect().top:o;t&&void 0!==n&&r<n&&(A.current.currentAnchor=e,A.current.currentAnchorTop=o,m=!0,N())}}if(!m)if(t?.offsetParent)A.current.currentAnchorTop=t.getBoundingClientRect().top;else{const e=o[0];e&&(A.current.currentAnchor=e,A.current.currentAnchorTop=e.getBoundingClientRect().top)}}b&&b(e)}),[N,k,b,u]);return r.ZP.createElement("div",{ref:w,className:t,onScroll:B,teactFastList:!h&&!m,onKeyDown:E,onDragOver:y,onDragLeave:C},g,m&&n?.length?r.ZP.createElement("div",{teactFastList:!h,style:(0,i.Z)("position: relative",l.wZ&&`height: ${f}px`)},P):P)}},13103:(e,t,n)=>{n.d(t,{Z:()=>v});var o=n(60748),r=n(517),s=n(46752),c=n(98069),l=n(18674),i=n(31212),a=n(274),d=n(59107),u=n(46590),m=n(231),f=n(62898);const v=({dialogRef:e,title:t,className:n,isOpen:v,isSlim:p,header:h,hasCloseButton:Z,noBackdrop:g,noBackdropClose:P,children:I,style:b,onClose:E,onCloseAnimationEnd:y,onEnter:C,shouldSkipHistoryAnimations:w})=>{const{shouldRender:A,transitionClassNames:N}=(0,i.Z)(v,y,w,void 0,w),k=(0,o.sO)(null);(0,o.d4)((()=>{if(v)return(0,c.l_)(),c.In}),[v]),(0,o.d4)((()=>v?(0,r.Z)({onEsc:E,onEnter:C}):void 0),[v,E,C]),(0,o.d4)((()=>v&&k.current?function(e){function t(t){if("Tab"!==t.key)return;t.preventDefault(),t.stopPropagation();const n=Array.from(e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));if(!n.length)return;const o=n.findIndex((e=>e.isSameNode(document.activeElement)));let r=0;o>=0&&(r=t.shiftKey?o>0?o-1:n.length-1:o<n.length-1?o+1:0),n[r].focus()}return document.addEventListener("keydown",t,!1),()=>{document.removeEventListener("keydown",t,!1)}}(k.current):void 0),[v]),(0,u.Z)({isActive:v,onBack:E}),(0,a.Z)((([e])=>(document.body.classList.toggle("has-open-dialog",Boolean(v)),(v||!v&&void 0!==e)&&(0,l.YW)(200),()=>{document.body.classList.remove("has-open-dialog")})),[v]);const B=(0,d.Z)();if(!A)return;const T=(0,s.Z)("Modal",n,N,g&&"transparent-backdrop",p&&"slim");return o.ZP.createElement(f.Z,null,o.ZP.createElement("div",{ref:k,className:T,tabIndex:-1,role:"dialog"},o.ZP.createElement("div",{className:"modal-container"},o.ZP.createElement("div",{className:"modal-backdrop",onClick:P?void 0:E}),o.ZP.createElement("div",{className:"modal-dialog",ref:e},h||(t?o.ZP.createElement("div",{className:"modal-header"},Z&&o.ZP.createElement(m.Z,{round:!0,color:"translucent",size:"smaller",ariaLabel:B("Close"),onClick:E},o.ZP.createElement("i",{className:"icon-close"})),o.ZP.createElement("div",{className:"modal-title"},t)):void 0),o.ZP.createElement("div",{className:"modal-content custom-scroll",style:b},I)))))}},27407:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(60748),r=n(91713),s=n(60782),c=n(65326),l=n(87204);function i(e,t,n,o){const{length:s}=e,c=o?e.indexOf(o):0,l=t===r.Uq.Forwards?c:c+1||s,i=Math.max(0,l-n),a=l+n-1,d=e.slice(Math.max(0,i),a+1);let u,m;switch(t){case r.Uq.Forwards:u=l>0,m=i>=0;break;case r.Uq.Backwards:u=l<s,m=a<=s-1}return{newViewportIds:d,areSomeLocal:u,areAllLocal:m}}const a=(e,t,n=!1,a=30)=>{const d=(0,o.sO)(),u=(0,o.sO)((()=>{if(!t||d.current)return;const{newViewportIds:e}=i(t,r.Uq.Forwards,a,t[0]);return e})()),m=(0,c.Z)();n&&(d.current={});const f=(0,l.Z)(t),v=(0,l.Z)(n);if(!t||n||t===f&&n===v)t||(u.current=void 0);else{const{offsetId:e=t[0],direction:n=r.Uq.Forwards}=d.current||{},{newViewportIds:o}=i(t,n,a,e);u.current&&(0,s.et)(u.current,o)||(u.current=o)}const p=(0,o.I4)((({direction:n,noScroll:o})=>{const c=u.current,l=c?n===r.Uq.Backwards?c[c.length-1]:c[0]:void 0;if(!t)return void(e&&e({offsetId:l}));o||(d.current={...d.current,direction:n,offsetId:l});const{newViewportIds:f,areSomeLocal:v,areAllLocal:p}=i(t,n,a,l);!v||c&&(0,s.et)(c,f)||(u.current=f,m()),!p&&e&&e({offsetId:l})}),[t,a,e,m]);return n?[t]:[u.current,p]}},62357:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(60748);const r=function(e,t,n=!1){const r=(0,o.sO)(e);(0,o.bt)((()=>{r.current=e}),[e]),(0,o.d4)((()=>{if(void 0===t)return;const e=setInterval((()=>r.current()),t);return n||r.current(),()=>clearInterval(e)}),[t,n])}},98069:(e,t,n)=>{n.d(t,{In:()=>s,l_:()=>r,wT:()=>c});let o=0;function r(){o+=1}function s(){o-=1}function c(){return o>0}},87675:(e,t,n)=>{n.d(t,{Z:()=>c,z:()=>s});var o=n(77361),r=n(82972);function s(e){e.style.display="none",(0,r.Z)(e),e.style.display=""}const c=(e,t)=>{o.cj&&(e.style.overflow="hidden"),void 0!==t&&(e.scrollTop=t),o.cj&&(e.style.overflow="")}}}]);
//# sourceMappingURL=9415.e9430f5721ad753c4a99.js.map